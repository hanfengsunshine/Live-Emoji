<!DOCTYPE html>
<html lang="en">
<head>
    <!--<link rel="stylesheet" type="text/css" href="src/css/face.css">-->
    <link rel="stylesheet" type="text/css" href="lib/css/d3-node-editor.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/alight@0.14.0/alight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@4.10.2/build/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.5.1/pixi.min.js"></script>
</head>
<body>
    <div class="row">
      <div class="col-sm-2">
          <!--<div id="content">-->
              <!--<div id="container">-->
                  <!--<video id="videoel" width="100" height="100" preload="auto" loop playsinline autoplay></video>-->
                  <!--<canvas id="overlay" width="100" height="100"></canvas>-->
              <!--</div>-->
              <!--<div id="emotion_container">-->
                  <!--<div id="emotion_icons">-->
                      <!--<img class="emotion_icon" id="icon1" src="./media/icon_angry.png">-->
                      <!--<img class="emotion_icon" id="icon2" src="./media/icon_sad.png">-->
                      <!--<img class="emotion_icon" id="icon3" src="./media/icon_surprised.png">-->
                      <!--<img class="emotion_icon" id="icon4" src="./media/icon_happy.png">-->
                  <!--</div>-->
                  <!--<div id='emotion_chart'></div>-->
              <!--</div>-->
              <!--<div id="controls">-->
                  <!--<input class="btn" type="button" value="wait, loading video" disabled="disabled" onclick="startVideo()" id="startbutton"></input>-->
              <!--</div>-->
          <!--</div>-->
          <div id="gui">
              <form id="variables" action="">
                  <div class="control_group">
                     Mouse:<br>
                     <label for="mouse_add_handles"><input type="radio" name="mouse_mode" value="mouse_add_handles" id="mouse_add_handles" checked="checked">Add Handles</label><br>
                     <label for="mouse_manipulate_handles"><input type="radio" name="mouse_mode" value="mouse_manipulate_handles" id="mouse_manipulate_handles">Manipulate Handles<br><span class="small">(shift-drag for rotation, alt-drag for scale)</span></label>
                 </div>
                  <div class="control_group">
                     <input type="button" value="Clear handles" id="clear_handles">
                     <input type="button" value="Reset transforms" id="reset_transforms">
                 </div>
                  <div class="control_group">
                     OBJ file URL:
                      <span class="small-link URL" id="obj_URL_circle" for="obj_URL" href="examples/simple-uvs.obj">circle</span>
                      <span class="small-link URL" id="obj_URL_woody" for="obj_URL" href="examples/woody-norm.obj">woody</span>
                     <br>
                     <input type="text" name="obj_URL" value="" id="obj_URL" size=50 />
                     <br />
                     Texture map URL:
                     <span class="small-link URL" id="texture_map_URL_wood" for="texture_map_URL" href="examples/woody.png">wood</span>
                     <span class="small-link URL" id="texture_map_URL_grid" for="texture_map_URL" href="examples/uv_grid.jpg">grid</span>
                     <span class="small-link URL" id="texture_map_URL_white" for="texture_map_URL" href="examples/white.png">white</span>
                     <br>
                     <input type="text" name="texture_map_URL" value="" id="texture_map_URL" size=50 />
                 </div>
                  <div class="control_group">
                     Visualize weights for handle:
                     <select name="visualize_weights" id="visualize_weights">
                         <option value="off" selected="selected">Off</option>
                     </select>
                 </div>
                  <div class="control_group control_group_last">
                     Weights mode:
                     <select name="weights_mode" id="weights_mode">
                         <option value="bounded" selected="selected">Bounded</option>
                         <option value="unbounded">Unbounded</option>
                     </select>
                 </div>
                  <div class="control_group">
                     Save: <input type="button" value="Save weights" id="save_weights"><br>
                     Load: <input type="file" value="Load weights" id="load_weights" style="width:200px">
                 </div>
              </form>
          </div>
      </div>
      <div class="col-sm-5" id="middle">
      </div>
      <div class="col-sm-5">
          <div class="panel">
              <p>Rendering Control</p>
              <table>
                  <tr>
                      <td width="200px">Resolution</td>
                      <td width="230px">
                          <select onchange="changeResolution(this);">
                              <option value="0">480x640</option>
                              <option value="1" selected="selected">600x800</option>
                              <option value="2">720x960</option>
                          </select>
                      </td>
                  </tr>
              </table>
          </div>
          <div id="nodeEditor" class="node-editor" style="width: 150px; height: 20px; padding: 0px; border: 1px;"></div>
      </div>
  </div>

    <script src="lib/js/Blob.js"></script>
    <script src="lib/js/FileSaver.js"></script>
    <script src="lib/js/three.min.js"></script>
    <script src="lib/js/OBJLoader.js"></script>
    <script src="lib/js/stats.min.js"></script>
    <script src="lib/js/numeric-1.2.6.min.js"></script>
    <script src="lib/js/d3-node-editor.js"></script>
    <script src="lib/js/p2.min.js"></script>
    <script src="lib/js/p2.renderer.min.js"></script>
    <script src="lib/js/pixi.min.js"></script>
    <script src="lib/js/clmtrackr.js"></script>
    <script src="lib/js/model_pca_20_svm.js"></script>
    <!--<script src="src/js/face_utils.js"></script>-->
    <!--<script src="src/js/emotionmodel.js"></script>-->
    <!--<script src="src/js/emotion_classifier.js"></script>-->
    <!--<script src="src/js/facetracking.js"></script>-->


    <script type="x-shader/x-vertex" id="vertShaderWeights">
      attribute float weight;
      varying float vweight;
      void main() {
          vweight = weight;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
      }
    </script>
    <script type="x-shader/x-fragment" id="fragShaderWeights">
    varying float vweight;
    void main() {
        vec3 two = vec3( 1., .5, 1. );
        vec3 one = vec3( 1., .5, .5 );
        vec3 zero = vec3( 1., 1., 1. );
        vec3 minus_one = vec3( .5, .5, 1. );

        if( vweight > 1.0 )
        {
            gl_FragColor = vec4( (vweight-1.)*two + (1.-(vweight-1.))*one, 1.0 );
        }
        else if( vweight > 0.0 )
        {
            gl_FragColor = vec4( (vweight)*one + (1.-vweight)*zero, 1.0 );
        }
        else
        {
            gl_FragColor = vec4( (vweight+1.)*zero + (1.-(vweight+1.))*minus_one, 1.0 );
        }
    }
    </script>
    <script src="dist/bundle.js"></script>
</body>
</html>
